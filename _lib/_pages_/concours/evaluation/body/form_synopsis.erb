<%
# frozen_string_literal: true
# Pour éditer le synopsis

prix_values = [
  [0, "Aucun prix"],
  [1, "🏆 Premier Prix"],
  [2, "🏆 Deuxième Prix"],
  [3, "🏆 Troisième Prix"]
]

form = Form.new(id: "synopsis-form", route:route.to_s)
form.rows = {
  "<operation/>"=> {name:"op", type:"hidden", value:"save_synopsis"},
  "<body/>"     => {name:"view", type:"hidden", value:"form_synopsis"},
  "<syno-id/>"  => {name:"synoid", type:"hidden", value:param(:synoid)},
  "Titre"       => {name:"syno_titre",    type:"text", value: synopsis.titre},
  "Auteur(s)"   => {name:"syno_auteurs",  type:"text", value: synopsis.real_auteurs},
  "Mots clés"   => {name:"syno_keywords", type:"text", value: synopsis.keywords}
}
if user.admin?
  form.rows.merge!("Prix" => {name:"syno_prix", type:"select", values:prix_values})
end
form.submit_button = "Enregistrer"
%>
<div class="titre">
  <span class="libelle">Édition de :</span>
  <span class="value"><%= synopsis.titre %></span>
</div>
<%= form.out %>
